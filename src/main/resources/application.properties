# Simple Chat Server Configuration
# Default Profile
spring.profiles.active=@spring.profiles.active@

# Common Configuration
server.port=${PORT:8080}
spring.application.name=simple-chat-server

# File Upload Configuration
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# WebSocket Configuration
spring.websocket.message-size-limit=65536

# Jackson Configuration
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=Asia/Seoul

# Actuator & Monitoring
management.endpoints.web.exposure.include=health,info,prometheus,metrics
management.endpoint.health.show-details=when-authorized
management.endpoint.prometheus.enabled=true
management.metrics.export.prometheus.enabled=true
management.metrics.tags.application=${spring.application.name}
management.metrics.distribution.percentiles-histogram.http.server.requests=true

# Security Configuration
# CORS: Set via environment variable in production (comma-separated domains)
# Example: CORS_ALLOWED_ORIGINS=https://beam.chat,https://www.beam.chat
cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:8080,http://localhost:3000}

# SECURITY WARNING: JWT secret MUST be set via environment variable in production
# Generate a secure random 256-bit key: openssl rand -base64 64
jwt.secret=${JWT_SECRET:beam-dev-secret-key-DO-NOT-USE-IN-PRODUCTION-please-set-JWT_SECRET-environment-variable}
jwt.expiration=86400000

# File Storage
file.upload-dir=uploads
file.max-size=10485760

# Logging
logging.level.com.beam=DEBUG
logging.level.org.springframework.security=INFO
logging.level.org.springframework.web=INFO

# Flyway Database Migration - Disabled by default (using JPA ddl-auto)
spring.flyway.enabled=false
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true
spring.flyway.baseline-version=0
spring.flyway.validate-on-migrate=true
spring.flyway.out-of-order=false

# Rate Limiting
rate.limit.api.capacity=100
rate.limit.api.refill-tokens=100
rate.limit.api.refill-duration-minutes=1
rate.limit.websocket.capacity=50
rate.limit.websocket.refill-tokens=50
rate.limit.websocket.refill-duration-seconds=10

# Email Configuration (Gmail SMTP example)
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME:}
spring.mail.password=${MAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true

# NCP SMS Configuration (optional, for future use)
ncp.sms.access-key=${NCP_ACCESS_KEY:}
ncp.sms.secret-key=${NCP_SECRET_KEY:}
ncp.sms.service-id=${NCP_SMS_SERVICE_ID:}
ncp.sms.sender-phone=${NCP_SENDER_PHONE:}

# App Configuration
app.name=BEAM

# Caching Configuration
spring.cache.type=caffeine
spring.cache.cache-names=users,chatRooms,messages,friends
spring.cache.caffeine.spec=expireAfterWrite=30m,maximumSize=1000

# Default to dev profile if not specified
spring.profiles.default=dev